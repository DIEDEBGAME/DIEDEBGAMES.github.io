<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dog Carts TCG - Versi√≥n Final Ultra</title>
    <style>
        body { background-color: #1a1a1a; color: white; font-family: 'Arial Black', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 100vh; margin: 0; }
        h1 { color: #f1c40f; text-shadow: 3px 3px #000; text-align: center; }

        .nav { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        button { padding: 12px 24px; font-weight: bold; cursor: pointer; border-radius: 10px; border: none; transition: 0.3s; text-transform: uppercase; }
        .btn-nav { background: #4a3025; color: white; border-bottom: 4px solid #221510; }
        .active-btn { background: #f1c40f !important; color: black !important; border-bottom: 4px solid #b8950c !important; }

        .section { display: none; width: 100%; max-width: 1100px; text-align: center; }
        .active-section { display: flex; flex-direction: column; align-items: center; }

        /* SOBRES */
        .pack-box { width: 180px; height: 250px; background: linear-gradient(135deg, #e74c3c, #962d22); border: 5px solid white; border-radius: 15px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.8); margin: 10px; }
        .shop-legend { background: linear-gradient(135deg, #f1c40f, #d4ac0d); }
        .shop-epic { background: linear-gradient(135deg, #9b59b6, #7d3c98); }
        .shop-good { background: linear-gradient(135deg, #00d4ff, #008fb3); }
        .shop-especial { background: linear-gradient(135deg, #ff4444, #990000); }
        .shop-mitico { background: linear-gradient(135deg, #ffff00, #ff8800); }
        
        /* CARTA */
        .arena { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-top: 30px; min-height: 300px; }
        .card { width: 180px; height: 260px; background: white; border-radius: 15px; color: black; display: flex; flex-direction: column; align-items: center; padding: 12px; border: 10px solid #2ecc71; box-shadow: 0 8px 20px rgba(0,0,0,0.6); animation: jumpIn 0.5s forwards; position: relative; }
        @keyframes jumpIn { from { transform: translateY(50px) scale(0); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }

        .card-icon { font-size: 55px; margin-top: 25px; }
        .card-name { font-weight: 900; margin-top: 15px; text-align: center; font-size: 0.85em; text-transform: uppercase; width: 100%; overflow: hidden; }
        .tag { margin-top: auto; padding: 8px; width: 100%; border-radius: 8px; color: white !important; font-weight: bold; text-align: center; font-size: 0.75em; text-shadow: 1px 1px 2px black; }

        /* RAREZAS */
        .border-comun { border-color: #2ecc71 !important; } .bg-comun { background-color: #2ecc71 !important; }
        .border-raro { border-color: #3498db !important; } .bg-raro { background-color: #3498db !important; }
        .border-epico { border-color: #9b59b6 !important; } .bg-epico { background-color: #9b59b6 !important; }
        .border-legendario { border-color: #f1c40f !important; } .bg-legendario { background-color: #f1c40f !important; }
        .border-especial { border-color: #ff4444 !important; } .bg-especial { background-color: #ff4444 !important; }
        .border-mitico { border-color: #ffff00 !important; box-shadow: 0 0 15px #ffff00; } .bg-mitico { background: linear-gradient(45deg, #ffff00, #ff8800) !important; }
        .border-good { border-color: #00d4ff !important; } .bg-good { background-color: #00d4ff !important; }

        .grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .btn-download { background: #3498db; color: white; margin-top: 8px; font-size: 0.7em; padding: 6px; border-radius: 5px; width: 100%; }
    </style>
</head>
<body>

    <h1>üêï DOG CARTS TCG üêï</h1>

    <div class="nav">
        <button class="btn-nav active-btn" id="nav-inicio" onclick="show('inicio')">INICIO</button>
        <button class="btn-nav" id="nav-tienda" onclick="show('tienda')">TIENDA</button>
        <button class="btn-nav" id="nav-maletin" onclick="show('maletin')">MALET√çN (<span id="count">0</span>)</button>
    </div>

    <div id="inicio" class="section active-section">
        <div class="pack-box" id="pack-main" onclick="abrirPack(5, 'azar')">
            <div style="font-size: 60px;">üêæ</div>
            <p>SOBRE 5 CARTAS</p>
        </div>
        <div id="arena-main" class="arena"></div>
    </div>

    <div id="tienda" class="section">
        <h2>SOBRES ESPECIALES</h2>
        <div style="display:flex; flex-wrap:wrap; justify-content:center; gap:10px;">
            <div class="pack-box shop-legend" onclick="abrirPack(1, 'legendario')">üëë<p>LEGENDARIO</p></div>
            <div class="pack-box shop-epic" onclick="abrirPack(1, 'epico')">üü£<p>√âPICO</p></div>
            <div class="pack-box shop-especial" onclick="abrirPack(1, 'especial')">üî¥<p>ESPECIAL</p></div>
            <div class="pack-box shop-mitico" onclick="abrirPack(1, 'mitico')">üü°<p>M√çTICO</p></div>
            <div class="pack-box shop-good" onclick="abrirPack(1, 'good')">üíé<p>GOOD</p></div>
        </div>
        <div id="arena-shop" class="arena"></div>
    </div>

    <div id="maletin" class="section">
        <div id="grid-maletin" class="grid"></div>
    </div>

    <canvas id="canvas" width="200" height="300" style="display:none;"></canvas>

<script>
    const data = {
        comun: ["Chihuahua", "Yorkshire Terrier", "Pomerania", "Malt√©s", "Pinscher Miniatura", "Papillon", "Pekin√©s", "Shih Tzu", "Toy Poodle", "Bich√≥n Fris√©", "Pug", "Bulldog Franc√©s", "Boston Terrier", "Cocker Spaniel", "Beagle", "Dachshund", "Jack Russell Terrier", "Fox Terrier", "Cavalier King Charles", "Lhasa Apso", "Havanese", "Japanese Chin", "Brussels Griffon", "Affenpinscher", "Miniature Schnauzer", "Italian Greyhound", "Chinese Crested", "Bolognese", "Pekingese Mix", "Mixed Small Breed"],
        raro: ["Shiba Inu", "Whippet", "Welsh Corgi", "Shetland Sheepdog", "American Eskimo Dog", "Border Terrier", "Basenji", "Finnish Spitz", "Keeshond", "Tibetan Spaniel", "Tibetan Terrier", "Schipperke", "Manchester Terrier", "Bedlington Terrier", "Norwich Terrier", "Norfolk Terrier", "Silky Terrier", "Australian Terrier", "Glen of Imaal Terrier", "Swedish Vallhund", "Icelandic Sheepdog", "Miniature Bull Terrier", "Pumi", "Puli", "Lagotto Romagnolo", "Lowchen", "Alaskan Klee Kai", "Xoloitzcuintle Mini", "Rat Terrier", "Feist"],
        epico: ["Border Collie", "Australian Shepherd", "Siberian Husky", "Samoyed", "Akita Inu", "Chow Chow", "Shar Pei", "English Bulldog", "American Bulldog", "Dalmatian", "Boxer", "Standard Schnauzer", "Vizsla", "Weimaraner", "Saluki", "Afghan Hound", "Borzoi", "Belgian Malinois", "Belgian Tervuren", "Belgian Sheepdog", "Finnish Lapphund", "Eurasier", "Shikoku", "Kishu Ken", "Thai Ridgeback", "Canaan Dog", "Carolina Dog", "Peruvian Inca Orchid", "Ibizan Hound", "Pharaoh Hound"],
        legendario: ["German Shepherd", "Golden Retriever", "Labrador Retriever", "Doberman Pinscher", "Rottweiler", "Alaskan Malamute", "Bernese Mountain Dog", "Great Pyrenees", "Saint Bernard", "Rhodesian Ridgeback", "Akita", "Cane Corso", "Dogo Argentino", "Bullmastiff", "English Mastiff", "Leonberger", "Tibetan Mastiff", "Boerboel", "Kuvasz", "Komondor", "Anatolian Shepherd", "Caucasian Shepherd", "Central Asian Shepherd", "Black Russian Terrier", "Tosa Inu", "Presa Canario", "Kangal", "Neapolitan Mastiff", "Irish Wolfhound", "Scottish Deerhound"],
        especial: ["Xoloitzcuintle", "Azawakh", "Sloughi", "Mudi", "Bergamasco", "Otterhound", "Spinone Italiano", "Bracco Italiano", "Cirneco dell‚ÄôEtna", "Kai Ken", "Hokkaido", "Yakutian Laika", "Greenland Dog", "Norwegian Lundehund", "Estrela Mountain Dog", "Pyrenean Mastiff", "Majorca Shepherd", "Romanian Mioritic", "Sarplaninac", "Tornjak", "Polish Lowland Sheepdog", "Czech Wolfdog", "Saarloos Wolfdog", "American Hairless Terrier", "Karelian Bear Dog", "Jindo", "Tatra Shepherd", "Bucovina Shepherd", "Pungsan Dog", "Thai Bangkaew"],
        mitico: ["Wolfdog (gen√©rico)", "Czech Wolfdog", "Saarloos Wolfdog", "Dire Wolf (legendario)", "Molossus (antiguo)", "Alaunt", "Laconian Hound", "Canis Panther", "Tibetan Do-Khyi Antiguo", "Roman War Dog", "Viking Dog", "Spartan Hound", "Egyptian War Dog", "Mayan Dog", "Aztec Techichi", "Celtic Hound", "Persian Mastiff", "Assyrian War Dog", "Mongolian Bankhar Antiguo", "Hunnic War Dog", "Macedonian Molossian", "Scythian Hound", "Himalayan Guardian Dog", "Arctic Spirit Dog", "Shadow Wolf Dog", "Iron Fang Dog", "Thunder Hound", "Flame Hound", "Frost Wolf", "Night Hound"],
        good: ["Golden Retriever", "Labrador Retriever", "Beagle", "Pug", "Cocker Spaniel", "Cavalier King Charles", "Border Collie", "Australian Shepherd", "Samoyed", "Shiba Inu", "Welsh Corgi", "Boxer", "Bernese Mountain Dog", "Newfoundland", "Irish Setter", "English Setter", "Flat-Coated Retriever", "Brittany", "Vizsla", "Havanese", "Bich√≥n Fris√©", "Poodle", "Shetland Sheepdog", "Papillon", "American Eskimo Dog", "Keeshond", "Finnish Lapphund", "Tibetan Terrier", "Nova Scotia Duck Tolling Retriever", "Soft Coated Wheaten Terrier"]
    };

    let coleccion = JSON.parse(localStorage.getItem('dogCartsCollection')) || [];
    let isOpening = false;

    function show(id) {
        if(isOpening) return;
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
        document.getElementById(id).classList.add('active-section');
        document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active-btn'));
        document.getElementById('nav-'+id).classList.add('active-btn');
        if(id === 'maletin') renderMaletin();
    }

    function abrirPack(cant, tipo) {
        if(isOpening) return;
        isOpening = true;
        const arena = (tipo === 'azar') ? document.getElementById('arena-main') : document.getElementById('arena-shop');
        arena.innerHTML = '';
        
        for(let i=0; i<cant; i++) {
            setTimeout(() => {
                let r = tipo;
                if(tipo === 'azar') {
                    const n = Math.random() * 100;
                    if(n > 99.5) r = "mitico";
                    else if(n > 98) r = "good";
                    else if(n > 95) r = "especial";
                    else if(n > 88) r = "legendario";
                    else if(n > 70) r = "epico";
                    else if(n > 40) r = "raro";
                    else r = "comun";
                }
                const lista = data[r];
                const perro = lista[Math.floor(Math.random() * lista.length)];
                const carta = { perro, rareza: r, id: Date.now() + i };
                
                coleccion.push(carta);
                arena.innerHTML += crearHTMLCarta(carta, false);
                save();
                if(i === cant - 1) isOpening = false;
            }, i * 400);
        }
    }

    function crearHTMLCarta(c, conBoton) {
        const r = c.rareza.toLowerCase();
        return `
            <div style="display:flex; flex-direction:column; align-items:center;">
                <div class="card border-${r}">
                    <div class="card-icon">üêï</div>
                    <div class="card-name">${c.perro}</div>
                    <div class="tag bg-${r}">${r.toUpperCase()}</div>
                </div>
                ${conBoton ? `<button class="btn-download" onclick="descargar('${c.perro}','${r}')">DESCARGAR</button>` : ''}
            </div>
        `;
    }

    function renderMaletin() {
        const grid = document.getElementById('grid-maletin');
        grid.innerHTML = coleccion.slice().reverse().map(c => crearHTMLCarta(c, true)).join('');
    }

    function save() {
        localStorage.setItem('dogCartsCollection', JSON.stringify(coleccion));
        document.getElementById('count').innerText = coleccion.length;
    }

    function descargar(nombre, rareza) {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const colores = { comun:'#2ecc71', raro:'#3498db', epico:'#9b59b6', legendario:'#f1c40f', especial:'#ff4444', mitico:'#ffff00', good:'#00d4ff' };
        const color = colores[rareza] || '#ccc';

        ctx.fillStyle = "white"; ctx.fillRect(0,0,200,300);
        ctx.strokeStyle = color; ctx.lineWidth = 15; ctx.strokeRect(0,0,200,300);
        ctx.fillStyle = "black"; ctx.font = "bold 16px Arial"; ctx.textAlign = "center";
        ctx.fillText(nombre, 100, 180);
        ctx.font = "60px Arial"; ctx.fillText("üêï", 100, 100);
        ctx.fillStyle = color; ctx.fillRect(10, 240, 180, 40);
        ctx.fillStyle = (rareza==='mitico') ? "black" : "white";
        ctx.font = "bold 14px Arial"; ctx.fillText(rareza.toUpperCase(), 100, 265);

        const link = document.createElement('a');
        link.download = `Perro_${nombre}.png`;
        link.href = canvas.toDataURL();
        link.click();
    }

    document.getElementById('count').innerText = coleccion.length;
</script>
</body>

</html>
